{"tagline":"Clustering and heatmap libraries for ArcGIS JS APi mapping applications","note":"Don't delete this file! It's used internally to help with page regeneration.","name":"Cluster-and-heatmap","google":"","body":"# cluster-and-heatmap\r\n\r\nClustering and heatmap libraries for ArcGIS JS API mapping applications\r\n\r\n[View it live] (http://maps.esri.com/SP_DEMOS/crimemapper/index.html)\r\n\r\n## Usage:\r\n\r\nThese libraries can be used independently and here is a sample usage in your code:\r\n\r\n#### For clustering:\r\n\r\n1. Include the js file (minified or full version)\r\n\r\n\t\t<script type=\"text/javascript\" src=\"cluster.js\"></script>\r\n\r\n2. Initialize the cluster layer with options. Look at the constructor of the layer for all possible options.\r\n\t\t\r\n\t\t```js\r\n\t\tclusterLayer = new modules.ClusterLayer(null, {\r\n\t\t\tmap: map, //esri map object\t\r\n\t\t\tvisible: !1, //default visibility\r\n\t\t\tintervals: 4, //number of equal interval cluster classes\r\n\t\t\tpixelsSquare: 128, \r\n\t\t\trgb: [26, 26, 26], //color of the cluster graphic\r\n\t\t\ttextrgb: [255, 255, 255] //color of label\r\n\t\t});\r\n\t\t```js\r\n\t\t\r\n3. Add points to cluster where points are an array of objects which has x and y. \r\n\t\t\r\n\t\t```js\r\n\t\t//Example\r\n\t\tvar points = [{x:12,y:22}];\r\n\t\tclusterLayer.setData(points);\r\n\t\t```js\r\n\t\t\r\n4. Show the layer\r\n\t\t\r\n\t\t```js\r\n\t\tclusterLayer.show() //or hide clusterLayer.hide()\r\n\t\t```js\r\n\t\t\r\n5. Connect to events such as onclick\t\r\n\t\t\r\n\t\t```js\r\n\t\t//on click do something\r\n\t\tdojo.connect(clusterLayer.graphics, \"onClick\", function(evt) {\r\n\t\t\t//get map extent that cluster respresents\r\n\t\t\tvar query = new esri.tasks.Query();\r\n\t\t\tquery.geometry = evt.graphic.attributes.extent;\r\n\t\t\tquery.outSpatialReference = map.spatialReference;\t\r\n\r\n\t\t\t//if you have a feature layer (feature service layer is optional)\r\n\t\t\tvar f = myfeaturelayer.selectFeatures(query, esri.layers.FeatureLayer.SELECTION_NEW);\r\n\r\n\t\t\t//open popup to show info\r\n\t\t\tmap.infoWindow.setFeatures([f]);\r\n\t\t\tmap.infoWindow.show(evt.mapPoint);\r\n\t\t});\r\n\r\n\r\n\t\t//Draw graphic on mouse over on the cluster \r\n\t\tvar b = new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_NULL, new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_DASH, new dojo.Color([150, 150, 150]), 2));\r\n\t\tvar c = new esri.Graphic(null, b, null, null);\r\n\t\r\n\t\tdojo.connect(clusterLayer.graphics, \"onMouseOver\", function(a) {\r\n\t\t\tc.geometry = a.graphic.attributes.extent, map.graphics.add(c)\r\n\t\t});\r\n\r\n\t\tdojo.connect(clusterLayer.graphics, \"onMouseOut\", function(a) {\r\n\t\t\tmap.graphics.remove(c)\r\n\t\t});\r\n\t\t```js\r\n\r\n#### For Heatmap\r\n\r\n1. Include the js files (minified or full versions, with IE polyfill for heatmap layer)\r\n\r\n\t\t<!--[if lt IE 9]>\r\n\t\t<script type=\"text/javascript\" src=\"excanvas.compiled.js\"></script>\r\n\t\t<![endif]-->\r\n\r\n\t\t<script type=\"text/javascript\" src=\"heatlayer.js\"></script>\r\n\r\n2. Initialize the heatmap layer with options. Look at the constructor of the layer for all possible options.\r\n\t\t\r\n\t\t```js\r\n\t\tvar heatLayer = new modules.HeatLayer(null, {\r\n\t\t\topacity: .9,\r\n\t\t\tvisible: !0, //initial visibility\r\n\t\t\tglobalMax: !1 //density based on all points or visible points\r\n\t\t});\r\n\t\t```js\r\n\r\n3. Add points to heatmap layer where points are an array of objects which has x and y. \r\n\t\t\r\n\t\t```js\r\n\t\t//Example: \r\n\t\tvar points = [{x:12,y:22}]\r\n\t\theatLayer.setData(points);\r\n\t\t```js\r\n\r\n4. Show or hide the layer\r\n\t\t\r\n\t\t```js\r\n\t\theatLayer.show()  //or heatLayer.hide()\r\n\t\t```js\r\n\r\n## Issues\r\n\r\nFind a bug or want to request a new feature?  Please let us know by submitting an issue.\r\n\r\n\r\n## Licensing\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n   http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n\r\n[](Esri Tags: ArcGIS JSAPI cluster heatmap feature featureservice many)\r\n[](Esri Language: JavaScript)\r\n\r\n"}